Updated ReaderWriterGate to use Tasks.
